# ============================================
# PATH Setup
# ============================================
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.cargo/bin:$PATH"

{{- if eq .chezmoi.os "darwin" }}
# Homebrew
eval "$(/opt/homebrew/bin/brew shellenv)"
{{- end }}

{{- if .install_oh_my_zsh }}
# ============================================
# oh-my-zsh Setup
# ============================================
export ZSH="$HOME/.oh-my-zsh"

# Use empty theme because we use starship
ZSH_THEME=""

# Plugins
plugins=(
    git
    docker
    kubectl
    rust
    cargo
    zsh-autosuggestions
    zsh-syntax-highlighting
)

# Load oh-my-zsh
source $ZSH/oh-my-zsh.sh
{{- end }}

# ============================================
# Aliases
# ============================================

# Modern replacements
alias ls='eza'
alias ll='eza -l'
alias la='eza -la'
alias lt='eza --tree'
alias cat='bat'
alias find='fd'
alias grep='rg'
alias du='dust'

# Git
alias lg='lazygit'
alias gd='git diff'
alias gds='git diff --staged'
alias gl='git log'
alias gs='git status'

# Tmux
alias ta='tmux attach -t'
alias tls='tmux ls'
alias tn='tmux new -s'

# ============================================
# Environment Variables
# ============================================

# Use bat as man pager
export MANPAGER="sh -c 'col -bx | bat -l man -p'"

# Use ripgrep with fzf
export FZF_DEFAULT_COMMAND='rg --files --hidden --follow --glob "!.git/*"'
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border'

# bat theme
export BAT_THEME="TwoDark"

# ============================================
# Tool Integrations
# ============================================

# fzf
{{- if eq .chezmoi.os "darwin" }}
source <(fzf --zsh)
{{- else if eq .osid "ubuntu" }}
source /usr/share/doc/fzf/examples/key-bindings.zsh
source /usr/share/doc/fzf/examples/completion.zsh
{{- end }}

# zoxide (smart cd)
eval "$(zoxide init zsh)"

# starship prompt (must be last)
eval "$(starship init zsh)"
